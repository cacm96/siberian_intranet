<div class="container">
  <div class="row">
    <div class="col-sm-12">
      <h2 class="text-center">Asignar Permisos</h2>
    </div>
  </div>
  
  <hr>

  <div class="row">
    <div class="col-sm-12">

      <mat-card>
        <mat-card-header class="titulo border-top-danger">
          <mat-card-title>
            Roles
          </mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <br>
          <div class="row">
            <div class="col-sm-6 offset-3">
              <div class="row">
                <div class="col-sm-12">

                  <mat-form-field>
                    <mat-select name="role" [(ngModel)]="roleSelected" placeholder="Seleccione un Rol" (ngModelChange)="changeRole($event)" required>
                      <mat-option *ngFor="let role of roles" [value]="role.id">{{ role.name }}</mat-option>
                    </mat-select>
                  </mat-form-field>

                  <mat-selection-list #functionAll [(ngModel)]="roleFunctionsSelected" (selectionChange)="onSelection($event, functionAll.selectedOptions)">
                    <mat-list-option *ngFor="let function of functions" [value]='function.id'>
                      {{function.action}}
                    </mat-list-option>
                  </mat-selection-list>
                  <p>
                    Funciones Seleccionadas: {{functionAll.selectedOptions.selected.length}}
                  </p>
                </div>
              </div>

              <br> 

              <div class="row">
                <div class="col-sm-12">
                  <button mat-raised-button color="primary" class="mr-3" (click)="register(roleFunctionsSelected)">Registrar</button>
                </div>
              </div>

            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>

</div>